var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))l.call(t,n)&&s(e,n,t[n]);return e},i=(e,a)=>t(e,n(a));import{C as c,R as m,F as d,a as h,b as g,c as u,d as E,e as k,f as p,g as w,h as C,i as v}from"./vendor.c349d256.js";const f=({done:e,childrenLength:t,showChildren:n,msg:a,toogle:o,toogleShowChildren:l,place:s,changeEditing:r,editing:i,commitMsg:C,commitChildren:v,deleteSelf:f})=>{const[N,S]=c.exports.useState(!1),[T,D]=c.exports.useState(a),b=()=>{r(!1),""===a?f():D(a)};return m.createElement("div",{className:`msg msg-${s}`,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1)},e?m.createElement(d,{className:"checkBox",onClick:()=>o()}):m.createElement(h,{className:"checkBox",onClick:()=>o()}),i?m.createElement("input",{type:"text",className:"editing",value:T,onChange:e=>D(e.target.value),onKeyDown:e=>{var t;"Enter"===e.key&&(""===(t=T)?f():C(t)),"Escape"===e.key&&b()},autoFocus:i,onBlur:()=>b()}):"todo"===s?m.createElement("h3",null,a):m.createElement("h6",null,a),m.createElement("div",{className:"item-bar"},N?m.createElement(m.Fragment,null,m.createElement("div",{className:"add-children icon-container",onClick:()=>v()},m.createElement(g,{className:"add-children-icon icon"})),m.createElement("div",{className:"edit-element icon-container",onClick:()=>r(!i)},i?m.createElement(E,{className:"edit-element-icon icon"}):m.createElement(u,{className:"edit-element-icon icon"})),m.createElement("div",{className:"remove-element icon-container danger",onClick:()=>f()},m.createElement(k,{className:"remove-element-icon icon"}))):m.createElement(m.Fragment,null),t>0?m.createElement("div",{className:"show-children icon-container",onClick:()=>l()},n?m.createElement(p,{className:"show-children-icon icon"}):m.createElement(w,{className:"show-children-icon icon"})):m.createElement(m.Fragment,null)))},N=({task:e,isLast:t,commitTask:n})=>{const{done:a,msg:o,childrenTasks:l,manualShowChildren:s,editing:c}=e;return m.createElement("div",{className:"item item-task"+(t?" last-item":"")},m.createElement(f,{done:a,childrenLength:l.length,toogleShowChildren:()=>n(i(r({},e),{manualShowChildren:!s})),toogle:()=>n(i(r({},e),{done:!a})),showChildren:s,msg:o,place:"task",changeEditing:t=>n(i(r({},e),{editing:t})),editing:c,commitMsg:t=>n(i(r({},e),{msg:t,editing:!1})),commitChildren:()=>n(i(r({},e),{childrenTasks:[...l,{msg:"",done:!1,editing:!0,manualShowChildren:!0,autoShowChildren:!0,childrenTasks:[]}]})),deleteSelf:()=>n(null)}),m.createElement(S,{tasks:l,showChildren:s,commitTask:e=>t=>n(e(t)),maker:t=>i(r({},e),{childrenTasks:t})}))};function S({tasks:e,showChildren:t,commitTask:n,maker:a}){return e.length>0&&t?m.createElement("div",{className:"container container-task"},e.map(((t,o)=>m.createElement(N,{key:o,task:t,isLast:o+1===e.length,commitTask:n((t=>a(t?e.map(((e,n)=>o===n?t:e)):e.filter(((e,t)=>o!==t)))))})))):m.createElement(m.Fragment,null)}const T=({todo:e,isLast:t,commitTodo:n})=>{const{tasks:a,done:o,msg:l,manualShowChildren:s,editing:c}=e;return m.createElement("div",{className:"item item-todo"+(t?" last-item":"")},m.createElement(f,{done:o,childrenLength:a.length,toogleShowChildren:()=>n(i(r({},e),{manualShowChildren:!s})),toogle:()=>n(i(r({},e),{done:!o})),showChildren:s,msg:l,place:"todo",changeEditing:t=>n(i(r({},e),{editing:t})),editing:c,commitMsg:t=>n(i(r({},e),{msg:t,editing:!1})),commitChildren:()=>n(i(r({},e),{tasks:[...a,{msg:"",done:!1,editing:!0,manualShowChildren:!0,autoShowChildren:!0,childrenTasks:[]}]})),deleteSelf:()=>n(null)}),m.createElement(S,{tasks:a,showChildren:s,commitTask:e=>t=>n(e(t)),maker:t=>i(r({},e),{tasks:t})}))},D=({state:e,todos:t,commitTodo:n,make:a})=>m.createElement("div",{className:"list-todo "+("todos"===e?"left":"doings"===e?"center":"right")},m.createElement("div",{className:"list-todo-bar"},m.createElement("h1",null,e.toUpperCase()),m.createElement("div",{className:"add-children",onClick:()=>n((e=>a([...t,e])))({done:!1,msg:"",editing:!0,tasks:[],manualShowChildren:!0,autoShowChildren:!0})},m.createElement(g,null))),t.length>0?m.createElement("div",{className:"container container-todo"},t.map(((e,o)=>m.createElement(T,{key:o,todo:e,isLast:o+1===t.length,commitTodo:n((e=>a(e?t.map(((t,n)=>o===n?e:t)):t.filter(((e,t)=>o!==t)))))})))):m.createElement(m.Fragment,null)),b=()=>{const[e,t]=c.exports.useState(JSON.parse(localStorage.getItem("fgTL")||'{"Todos":[],"Doings":[],"Dones":[]}')),[n,a]=c.exports.useState(!1),[o,l]=c.exports.useState(!1),[s,d]=c.exports.useState(""),h=e=>n=>{t(e(n));const a=(e,t)=>{if(0===e.childrenTasks.length)return e;const n=e.childrenTasks.map(a),o=n.map((e=>e.done)).reduce(((e,t)=>e&&t),!0);return i(r({},e),{childrenTasks:n,done:o,manualShowChildren:e.manualShowChildren===e.autoShowChildren?!o:e.manualShowChildren,autoShowChildren:!o})},o=(e,t)=>{if(0===e.tasks.length)return e;const n=e.tasks.map(a),o=n.map((e=>e.done)).reduce(((e,t)=>e&&t),!0);return i(r({},e),{tasks:n,done:o,manualShowChildren:e.manualShowChildren===e.autoShowChildren?!o:e.manualShowChildren,autoShowChildren:!o})};t((e=>({Todos:e.Todos.map(o),Doings:e.Doings.map(o),Dones:e.Dones.map(o)})));const l=e=>!e.done&&e.childrenTasks.every((e=>l(e)))||!e.done&&0===e.childrenTasks.length,s=e=>!e.done&&e.tasks.every((e=>l(e)))||!e.done&&0===e.tasks.length,c=e=>!e.done&&e.tasks.some((e=>!l(e)));t((e=>({Todos:[...e.Todos.filter(s),...e.Dones.filter(s),...e.Doings.filter(s)],Doings:[...e.Doings.filter(c),...e.Todos.filter(c),...e.Dones.filter(c)],Dones:[...e.Dones.filter((e=>e.done)),...e.Todos.filter((e=>e.done)),...e.Doings.filter((e=>e.done))]})))};c.exports.useEffect((()=>(localStorage.setItem("fgTL",JSON.stringify(e)),()=>{})),[e]);return m.createElement(m.Fragment,null,n||o?m.createElement("div",{className:"dialoge"},n?m.createElement("div",{className:"loading-new-content"},m.createElement("div",{className:"content"},m.createElement("h1",{className:"warning"},"Loading external files will delete current todos"),m.createElement("div",{className:"buttons"},m.createElement("button",{className:"ok",onClick:()=>{a(!1),t(JSON.parse(s)),d("")}},"Ok"),m.createElement("button",{className:"cancel",onClick:()=>{a(!1),d("")}},"Cancel")))):m.createElement(m.Fragment,null),o?m.createElement("div",{className:"invallid-new-content"},m.createElement("div",{className:"content"},m.createElement("h1",{className:"warning"},"Invallid JSON format"),m.createElement("div",{className:"buttons"},m.createElement("button",{className:"ok",onClick:()=>{l(!1),d("")}},"Ok")))):m.createElement(m.Fragment,null)):m.createElement(m.Fragment,null),m.createElement("div",{className:"download"},m.createElement("a",{href:URL.createObjectURL(new Blob([JSON.stringify(e,void 0,2)],{type:"application/json"})),download:"todo-list.json"},m.createElement(C,null))),m.createElement("div",{className:"App",onDrop:e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.files;if(t&&1===t.length){const n=t[0],o=new FileReader;return o.addEventListener("load",(()=>{d((()=>((e=>{try{JSON.parse(e),a(!0)}catch(t){l(!0)}})(o.result),o.result)))})),o.addEventListener("error",(()=>{l(!0)})),o.readAsText(n),void e.dataTransfer.clearData()}e.dataTransfer.clearData(),l(!0)},onDragEnter:e=>{e.preventDefault(),e.stopPropagation()},onDragOver:e=>{e.preventDefault(),e.stopPropagation()}},m.createElement(D,{state:"todos",todos:e.Todos,commitTodo:h,make:t=>i(r({},e),{Todos:t})}),m.createElement(D,{state:"doings",todos:e.Doings,commitTodo:h,make:t=>i(r({},e),{Doings:t})}),m.createElement(D,{state:"dones",todos:e.Dones,commitTodo:h,make:t=>i(r({},e),{Dones:t})})))};v.render(m.createElement(m.StrictMode,null,m.createElement(b,null)),document.getElementById("root"));
